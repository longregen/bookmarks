<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Search - Bookmarks by Localforge</title>
  <link rel="stylesheet" href="../shared/theme.css">
  <style>
    body { margin: 0; font-family: var(--font-family); background: var(--bg-primary); color: var(--text-primary); }
    .layout { display: flex; flex-direction: column; height: 100vh; }
    .main-content { display: flex; flex: 1; overflow: hidden; }
    .sidebar { width: 200px; background: var(--bg-secondary); border-right: 1px solid var(--border-primary); padding: var(--space-6); overflow-y: auto; }
    .sidebar-title { font-size: var(--text-sm); font-weight: var(--font-semibold); color: var(--text-tertiary); text-transform: uppercase; margin-bottom: var(--space-4); margin-top: var(--space-6); }
    .sidebar-title:first-child { margin-top: 0; }
    .filter-item { display: flex; align-items: center; gap: var(--space-2); padding: var(--space-2); cursor: pointer; }
    .filter-item:hover { background: var(--bg-hover); border-radius: var(--radius-sm); }
    .middle { flex: 1; overflow-y: auto; padding: var(--space-6); }
    .search-box { display: flex; gap: var(--space-3); margin-bottom: var(--space-6); }
    .search-input { flex: 1; }
    .result-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4); }
    .result-card { background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: var(--radius-lg); padding: var(--space-4); margin-bottom: var(--space-4); cursor: pointer; transition: all var(--transition-base); }
    .result-card:hover { border-color: var(--border-secondary); box-shadow: var(--shadow-md); }
    .relevance { font-size: var(--text-lg); font-weight: var(--font-bold); color: var(--accent-primary); margin-bottom: var(--space-2); }
    .card-title { font-size: var(--text-md); font-weight: var(--font-medium); color: var(--text-primary); margin-bottom: var(--space-2); }
    .card-meta { font-size: var(--text-sm); color: var(--text-tertiary); margin-bottom: var(--space-3); }
    .card-url { color: var(--accent-link); text-decoration: none; margin-right: var(--space-2); }
    .card-url:hover { text-decoration: underline; }
    .qa-preview { background: var(--bg-tertiary); padding: var(--space-3); border-radius: var(--radius-md); border-left: 3px solid var(--accent-primary); }
    .qa-q { font-weight: var(--font-medium); color: var(--text-secondary); margin-bottom: var(--space-2); font-size: var(--text-sm); }
    .qa-a { color: var(--text-tertiary); font-size: var(--text-sm); line-height: var(--leading-normal); }
    .detail-panel { position: fixed; top: 0; right: -680px; width: 680px; max-width: 100vw; height: 100vh; background: var(--bg-secondary); box-shadow: var(--shadow-lg); overflow-y: auto; transition: right var(--transition-slow); z-index: 1000; }
    .detail-panel.active { right: 0; }
    .detail-backdrop { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.5); opacity: 0; pointer-events: none; transition: opacity var(--transition-slow); z-index: 999; }
    .detail-backdrop.active { opacity: 1; pointer-events: all; }
    .detail-header { padding: var(--space-6); border-bottom: 1px solid var(--border-primary); display: flex; justify-content: space-between; align-items: center; }
    .detail-content { padding: var(--space-6); }
    .detail-actions { display: flex; gap: var(--space-2); }
    .qa-section { margin-top: var(--space-6); padding-top: var(--space-6); border-top: 1px solid var(--border-primary); }
    .qa-pair { margin-bottom: var(--space-4); }
    .qa-question { font-weight: var(--font-medium); color: var(--text-secondary); margin-bottom: var(--space-2); }
    .qa-answer { color: var(--text-tertiary); line-height: var(--leading-relaxed); }
    .markdown-content { line-height: var(--leading-relaxed); }
    .markdown-content h1 { font-size: var(--text-xl); margin-top: var(--space-6); margin-bottom: var(--space-4); }
    .markdown-content h2 { font-size: var(--text-lg); margin-top: var(--space-5); margin-bottom: var(--space-3); }
    .markdown-content h3 { font-size: var(--text-md); margin-top: var(--space-4); margin-bottom: var(--space-2); }
    .markdown-content p { margin-bottom: var(--space-4); }
    .markdown-content code { background: var(--bg-code); padding: 2px 6px; border-radius: var(--radius-sm); font-family: var(--font-mono); font-size: var(--text-sm); }
    .markdown-content pre { background: var(--bg-code-block); color: var(--text-code-block); padding: var(--space-4); border-radius: var(--radius-md); overflow-x: auto; margin-bottom: var(--space-4); }
    .autocomplete-container { position: relative; flex: 1; }
    .autocomplete-dropdown { position: absolute; top: 100%; left: 0; right: 0; background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: var(--radius-md); margin-top: var(--space-1); max-height: 300px; overflow-y: auto; z-index: 100; box-shadow: var(--shadow-lg); display: none; }
    .autocomplete-dropdown.active { display: block; }
    .autocomplete-item { padding: var(--space-3) var(--space-4); cursor: pointer; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--border-primary); }
    .autocomplete-item:last-child { border-bottom: none; }
    .autocomplete-item:hover { background: var(--bg-hover); }
    .autocomplete-query { color: var(--text-primary); font-size: var(--text-sm); }
    .autocomplete-count { color: var(--text-tertiary); font-size: var(--text-xs); }
  </style>
</head>
<body class="layout">
  <header class="app-header">
    <nav class="app-header__nav">
      <a href="../library/library.html" class="app-header__nav-link">Library</a>
      <a href="search.html" class="app-header__nav-link active">Search</a>
      <a href="../stumble/stumble.html" class="app-header__nav-link">Stumble</a>
      <a href="../options/options.html" class="app-header__nav-link">Settings</a>
    </nav>
    <div class="app-header__brand">
      <div id="healthIndicator"></div>
      <h1 class="app-header__title">Bookmarks by Localforge</h1>
    </div>
  </header>

  <div class="main-content">
    <aside class="sidebar">
      <div class="sidebar-title">Tags</div>
      <div id="tagFilters"></div>

      <div class="sidebar-title">Status</div>
      <div id="statusFilters"></div>
    </aside>

    <main class="middle">
      <div class="search-box">
        <div class="autocomplete-container">
          <input type="text" id="searchInput" class="input search-input" placeholder="Ask anything...">
          <div id="autocompleteDropdown" class="autocomplete-dropdown"></div>
        </div>
        <button id="searchBtn" class="btn btn-primary">üîç Search</button>
      </div>
      <div class="result-header">
        <h2 style="margin: 0; font-size: var(--text-lg);"><span id="resultCount">0</span> results</h2>
      </div>
      <div id="resultsList"></div>
    </main>
  </div>

  <div id="detailBackdrop" class="detail-backdrop"></div>
  <div id="detailPanel" class="detail-panel">
    <div class="detail-header">
      <button id="closeDetailBtn" class="btn btn-secondary">‚Üê Back</button>
      <div class="detail-actions">
        <button id="debugBtn" class="btn btn-secondary">Debug</button>
        <button id="exportBtn" class="btn btn-secondary">Export</button>
        <button id="deleteBtn" class="btn btn-danger">Delete</button>
      </div>
    </div>
    <div id="detailContent" class="detail-content"></div>
  </div>

  <script src="search.ts" type="module"></script>
</body>
</html>
