<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Library - Bookmarks by Localforge</title>
  <link rel="stylesheet" href="../shared/theme.css">
  <style>
    body { margin: 0; font-family: var(--font-family); background: var(--bg-primary); color: var(--text-primary); }
    .layout { display: flex; flex-direction: column; height: 100vh; }
    .main-content { display: flex; flex: 1; overflow: hidden; }
    .sidebar { width: 200px; background: var(--bg-secondary); border-right: 1px solid var(--border-primary); padding: var(--space-6); overflow-y: auto; }
    .sidebar-title { font-size: var(--text-sm); font-weight: var(--font-semibold); color: var(--text-tertiary); text-transform: uppercase; margin-bottom: var(--space-4); }
    .tag-item { display: flex; justify-content: space-between; align-items: center; padding: var(--space-2); border-radius: var(--radius-md); cursor: pointer; transition: all var(--transition-fast); margin-bottom: var(--space-1); }
    .tag-item:hover { background: var(--bg-hover); }
    .tag-item.active { background: var(--accent-primary); color: var(--accent-text); }
    .tag-name { font-size: var(--text-base); }
    .tag-count { font-size: var(--text-sm); color: var(--text-muted); }
    .tag-item.active .tag-count { color: var(--accent-text); opacity: 0.8; }
    .middle { flex: 1; overflow-y: auto; padding: var(--space-6); }
    .controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-4); }
    .bookmark-card { background: var(--bg-secondary); border: 1px solid var(--border-primary); border-radius: var(--radius-lg); padding: var(--space-4); margin-bottom: var(--space-4); cursor: pointer; transition: all var(--transition-base); }
    .bookmark-card:hover { border-color: var(--border-secondary); box-shadow: var(--shadow-md); }
    .card-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: var(--space-2); }
    .card-title { font-size: var(--text-md); font-weight: var(--font-medium); color: var(--text-primary); flex: 1; }
    .status-dot { width: 8px; height: 8px; border-radius: 50%; margin-left: var(--space-2); }
    .status-complete { background: var(--success-text); }
    .status-pending { background: var(--text-muted); }
    .status-processing { background: var(--info-text); }
    .status-error { background: var(--error-text); }
    .card-meta { font-size: var(--text-sm); color: var(--text-tertiary); }
    .card-url { color: var(--accent-link); text-decoration: none; margin-right: var(--space-2); }
    .card-url:hover { text-decoration: underline; }
    .card-tags { margin-top: var(--space-2); display: flex; gap: var(--space-2); flex-wrap: wrap; }
    .tag-badge { background: var(--badge-bg); color: var(--badge-text); padding: var(--space-1) var(--space-2); border-radius: var(--radius-sm); font-size: var(--text-xs); }
    .detail-panel { position: fixed; top: 0; right: -680px; width: 680px; max-width: 100vw; height: 100vh; background: var(--bg-secondary); box-shadow: var(--shadow-lg); overflow-y: auto; transition: right var(--transition-slow); z-index: 1000; }
    .detail-panel.active { right: 0; }
    .detail-backdrop { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.5); opacity: 0; pointer-events: none; transition: opacity var(--transition-slow); z-index: 999; }
    .detail-backdrop.active { opacity: 1; pointer-events: all; }
    .detail-header { padding: var(--space-6); border-bottom: 1px solid var(--border-primary); display: flex; justify-content: space-between; align-items: center; }
    .detail-content { padding: var(--space-6); }
    .detail-actions { display: flex; gap: var(--space-2); }
    .qa-section { margin-top: var(--space-6); padding-top: var(--space-6); border-top: 1px solid var(--border-primary); }
    .qa-pair { margin-bottom: var(--space-4); }
    .qa-question { font-weight: var(--font-medium); color: var(--text-secondary); margin-bottom: var(--space-2); }
    .qa-answer { color: var(--text-tertiary); line-height: var(--leading-relaxed); }
    .markdown-content { line-height: var(--leading-relaxed); }
    .markdown-content h1 { font-size: var(--text-xl); margin-top: var(--space-6); margin-bottom: var(--space-4); }
    .markdown-content h2 { font-size: var(--text-lg); margin-top: var(--space-5); margin-bottom: var(--space-3); }
    .markdown-content h3 { font-size: var(--text-md); margin-top: var(--space-4); margin-bottom: var(--space-2); }
    .markdown-content p { margin-bottom: var(--space-4); }
    .markdown-content code { background: var(--bg-code); padding: 2px 6px; border-radius: var(--radius-sm); font-family: var(--font-mono); font-size: var(--text-sm); }
    .markdown-content pre { background: var(--bg-code-block); color: var(--text-code-block); padding: var(--space-4); border-radius: var(--radius-md); overflow-x: auto; margin-bottom: var(--space-4); }
  </style>
</head>
<body class="layout">
  <header class="app-header">
    <nav class="app-header__nav">
      <a href="library.html" class="app-header__nav-link active">Library</a>
      <a href="../search/search.html" class="app-header__nav-link">Search</a>
      <a href="../stumble/stumble.html" class="app-header__nav-link">Stumble</a>
      <a href="../options/options.html" class="app-header__nav-link">Settings</a>
    </nav>
    <div class="app-header__brand">
      <h1 class="app-header__title">Bookmarks by Localforge</h1>
    </div>
  </header>

  <div class="main-content">
    <aside class="sidebar">
      <div class="sidebar-title">TAGS</div>
      <div id="tagList"></div>
    </aside>

    <main class="middle">
      <div class="controls">
        <h2 style="margin: 0; font-size: var(--text-lg);">Bookmarks</h2>
        <select id="sortSelect" class="input" style="width: auto; padding: var(--space-2) var(--space-3);">
          <option value="newest">Newest First</option>
          <option value="oldest">Oldest First</option>
          <option value="title">Title A-Z</option>
        </select>
      </div>
      <div id="bookmarkList"></div>
    </main>
  </div>

  <div id="detailBackdrop" class="detail-backdrop"></div>
  <div id="detailPanel" class="detail-panel">
    <div class="detail-header">
      <button id="closeDetailBtn" class="btn btn-secondary">‚Üê Back</button>
      <div class="detail-actions">
        <button id="debugBtn" class="btn btn-secondary">Debug</button>
        <button id="exportBtn" class="btn btn-secondary">Export</button>
        <button id="deleteBtn" class="btn btn-danger">Delete</button>
      </div>
    </div>
    <div id="detailContent" class="detail-content"></div>
  </div>

  <script src="library.ts" type="module"></script>
</body>
</html>
